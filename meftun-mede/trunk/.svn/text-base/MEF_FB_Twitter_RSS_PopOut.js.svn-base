(function(b,P,ga){function ba(p){if(!K){l=p;ca(b.extend(a,b.data(l,u)));g=b(l);h=0;"nofollow"!==a.rel&&(g=b("."+C).filter(function(){return(b.data(this,u).rel||this.rel)===a.rel}),h=g.index(l),-1===h&&(g=g.add(l),h=g.length-1));if(!v){v=D=!0;n.show();if(a.returnFocus)try{l.blur(),b(l).one(da,function(){try{this.focus()}catch(a){}})}catch(f){}s.css({opacity:+a.opacity,cursor:a.overlayClose?"pointer":"auto"}).show();a.w=m(a.initialWidth,"x");a.h=m(a.initialHeight,"y");d.position(0);L&&t.bind("resize."+ M+" scroll."+M,function(){s.css({width:t.width(),height:t.height(),top:t.scrollTop(),left:t.scrollLeft()})}).trigger("resize."+M);y(ea,a.onOpen);Q.add(R).hide();S.html(a.close).show()}d.load(!0)}}function ha(){var p,b=r+"Slideshow_",c="click."+r,e,q;a.slideshow&&g[1]&&(e=function(){E.text(a.slideshowStop).unbind(c).bind(U,function(){if(h<g.length-1||a.loop)p=setTimeout(d.next,a.slideshowSpeed)}).bind(V,function(){clearTimeout(p)}).one(c+" "+N,q);n.removeClass(b+"off").addClass(b+"on");p=setTimeout(d.next, a.slideshowSpeed)},q=function(){clearTimeout(p);E.text(a.slideshowStart).unbind([U,V,N,c].join(" ")).one(c,e);n.removeClass(b+"on").addClass(b+"off")},a.slideshowAuto?e():q())}function y(a,f){f&&f.call(l);b.event.trigger(a)}function ca(a){for(var f in a)b.isFunction(a[f])&&"on"!==f.substring(0,2)&&(a[f]=a[f].call(l));a.rel=a.rel||l.rel||"nofollow";a.href=b.trim(a.href||b(l).attr("href"));a.title=a.title||l.title}function W(p){return a.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(p)} function m(a,b){b="x"===b?t.width():t.height();return"string"==typeof a?Math.round(/%/.test(a)?b/100*parseInt(a,10):parseInt(a,10)):a}function c(a,c){var d=P.createElement("div");a&&(d.id=r+a);d.style.cssText=c||!1;return b(d)}var fa={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0, current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0},u="colorbox",r="cbox",ea=r+"_open",V=r+"_load",U=r+"_complete",N=r+"_cleanup",da=r+"_closed",O=r+"_purge",F=b.browser.msie&&!b.support.opacity,L=F&&7>b.browser.version,M=r+"_IE6", s,n,z,k,X,Y,Z,$,g,t,q,G,H,R,aa,E,I,J,S,Q,a={},A,B,w,x,l,h,e,v,D,K=!1,d,C=r+"Element";d=b.fn[u]=b[u]=function(a,c){var d=this,e;if(!d[0]&&d.selector)return d;a=a||{};c&&(a.onComplete=c);d[0]&&void 0!==d.selector||(d=b("<a/>"),a.open=!0);d.each(function(){b.data(this,u,b.extend({},b.data(this,u)||fa,a));b(this).addClass(C)});e=a.open;b.isFunction(e)&&(e=e.call(d));e&&ba(d[0]);return d};d.init=function(){t=b(ga);n=c().attr({id:u,"class":F?r+(L?"IE6":"IE"):""});s=c("Overlay",L?"position:absolute":"").hide(); z=c("Wrapper");k=c("Content").append(q=c("LoadedContent","width:0; height:0; overflow:hidden"),H=c("LoadingOverlay").add(c("LoadingGraphic")),R=c("Title"),aa=c("Current"),I=c("Next"),J=c("Previous"),E=c("Slideshow").bind(ea,ha),S=c("Close"));z.append(c().append(c("TopLeft"),X=c("TopCenter"),c("TopRight")),c(!1,"clear:left").append(Y=c("MiddleLeft"),k,Z=c("MiddleRight")),c(!1,"clear:left").append(c("BottomLeft"),$=c("BottomCenter"),c("BottomRight"))).children().children().css({"float":"left"});G=c(!1, "position:absolute; width:9999px; visibility:hidden; display:none");b("body").prepend(s,n.append(z,G));k.children().hover(function(){b(this).addClass("hover")},function(){b(this).removeClass("hover")}).addClass("hover");A=X.height()+$.height()+k.outerHeight(!0)-k.height();B=Y.width()+Z.width()+k.outerWidth(!0)-k.width();w=q.outerHeight(!0);x=q.outerWidth(!0);n.css({"padding-bottom":A,"padding-right":B}).hide();I.click(function(){d.next()});J.click(function(){d.prev()});S.click(function(){d.close()}); Q=I.add(J).add(aa).add(E);k.children().removeClass("hover");b("."+C).live("click",function(a){0!==a.button&&"undefined"!=typeof a.button||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault(),ba(this))});s.click(function(){a.overlayClose&&d.close()});b(P).bind("keydown."+r,function(b){var c=b.keyCode;v&&a.escKey&&27===c&&(b.preventDefault(),d.close());v&&a.arrowKey&&g[1]&&(37===c?(b.preventDefault(),J.click()):39===c&&(b.preventDefault(),I.click()))})};d.remove=function(){n.add(s).remove();b("."+C).die("click").removeData(u).removeClass(C)}; d.position=function(b,d){function c(a){X[0].style.width=$[0].style.width=k[0].style.width=a.style.width;H[0].style.height=H[1].style.height=k[0].style.height=Y[0].style.height=Z[0].style.height=a.style.height}var e,g=Math.max(P.documentElement.clientHeight-a.h-w-A,0)/2+t.scrollTop(),h=Math.max(t.width()-a.w-x-B,0)/2+t.scrollLeft();e=n.width()===a.w+x&&n.height()===a.h+w?0:b;z[0].style.width=z[0].style.height="9999px";n.dequeue().animate({width:a.w+x,height:a.h+w,top:g,left:h},{duration:e,complete:function(){c(this); D=!1;z[0].style.width=a.w+x+B+"px";z[0].style.height=a.h+w+A+"px";d&&d()},step:function(){c(this)}})};d.resize=function(b){v&&(b=b||{},b.width&&(a.w=m(b.width,"x")-x-B),b.innerWidth&&(a.w=m(b.innerWidth,"x")),q.css({width:a.w}),b.height&&(a.h=m(b.height,"y")-w-A),b.innerHeight&&(a.h=m(b.innerHeight,"y")),b.innerHeight||b.height||(b=q.wrapInner("<div style='overflow:auto'></div>").children(),a.h=b.height(),b.replaceWith(b.children())),q.css({height:a.h}),d.position("none"===a.transition?0:a.speed))}; d.prep=function(l){function f(c){d.position(c,function(){var c,f,l,m,k=g.length,p,s;!v||(s=function(){H.hide();y(U,a.onComplete)},F&&e&&q.fadeIn(100),R.html(a.title).add(q).show(),1<k?("string"==typeof a.current&&aa.html(a.current.replace(/\{current\}/,h+1).replace(/\{total\}/,k)).show(),I[a.loop||h<k-1?"show":"hide"]().html(a.next),J[a.loop||h?"show":"hide"]().html(a.previous),c=h?g[h-1]:g[k-1],l=h<k-1?g[h+1]:g[0],a.slideshow&&E.show(),a.preloading&&(m=b.data(l,u).href||l.href,f=b.data(c,u).href|| c.href,m=b.isFunction(m)?m.call(l):m,f=b.isFunction(f)?f.call(c):f,W(m)&&(b("<img/>")[0].src=m),W(f)&&(b("<img/>")[0].src=f))):Q.hide(),a.iframe?(p=b("<iframe/>").addClass(r+"Iframe")[0],a.fastIframe?s():b(p).load(s),p.name=r+ +new Date,p.src=a.href,a.scrolling||(p.scrolling="no"),F&&(p.frameBorder=0,p.allowTransparency="true"),b(p).appendTo(q).one(O,function(){p.src="//about:blank"})):s(),"fade"===a.transition?n.fadeTo(T,1,function(){n[0].style.filter=""}):n[0].style.filter="",t.bind("resize."+r, function(){d.position(0)}))})}function m(){a.h=a.h||q.height();a.h=a.mh&&a.mh<a.h?a.mh:a.h;return a.h}function s(){a.w=a.w||q.width();a.w=a.mw&&a.mw<a.w?a.mw:a.w;return a.w}if(v){var T="none"===a.transition?0:a.speed;t.unbind("resize."+r);q.remove();q=c("LoadedContent").html(l);q.hide().appendTo(G.show()).css({width:s(),overflow:a.scrolling?"auto":"hidden"}).css({height:m()}).prependTo(k);G.hide();b(e).css({"float":"none"});L&&b("select").not(n.find("select")).filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one(N, function(){this.style.visibility="inherit"});"fade"===a.transition?n.fadeTo(T,0,function(){f(0)}):f(T)}};d.load=function(p){var f,n,k=d.prep;D=!0;e=!1;l=g[h];p||ca(b.extend(a,b.data(l,u)));y(O);y(V,a.onLoad);a.h=a.height?m(a.height,"y")-w-A:a.innerHeight&&m(a.innerHeight,"y");a.w=a.width?m(a.width,"x")-x-B:a.innerWidth&&m(a.innerWidth,"x");a.mw=a.w;a.mh=a.h;a.maxWidth&&(a.mw=m(a.maxWidth,"x")-x-B,a.mw=a.w&&a.w<a.mw?a.w:a.mw);a.maxHeight&&(a.mh=m(a.maxHeight,"y")-w-A,a.mh=a.h&&a.h<a.mh?a.h:a.mh);f= a.href;H.show();a.inline?(c().hide().insertBefore(b(f)[0]).one(O,function(){b(this).replaceWith(q.children())}),k(b(f))):a.iframe?k(" "):a.html?k(a.html):W(f)?(b(e=new Image).addClass(r+"Photo").error(function(){a.title=!1;k(c("Error").text("This image could not be loaded"))}).load(function(){var b;e.onload=null;a.scalePhotos&&(n=function(){e.height-=e.height*b;e.width-=e.width*b},a.mw&&e.width>a.mw&&(b=(e.width-a.mw)/e.width,n()),a.mh&&e.height>a.mh&&(b=(e.height-a.mh)/e.height,n()));a.h&&(e.style.marginTop= Math.max(a.h-e.height,0)/2+"px");g[1]&&(h<g.length-1||a.loop)&&(e.style.cursor="pointer",e.onclick=function(){d.next()});F&&(e.style.msInterpolationMode="bicubic");setTimeout(function(){k(e)},1)}),setTimeout(function(){e.src=f},1)):f&&G.load(f,function(a,d,e){k("error"===d?c("Error").text("Request unsuccessful: "+e.statusText):b(this).contents())})};d.next=function(){!D&&g[1]&&(h<g.length-1||a.loop)&&(h=h<g.length-1?h+1:0,d.load())};d.prev=function(){!D&&g[1]&&(h||a.loop)&&(h=h?h-1:g.length-1,d.load())}; d.close=function(){v&&!K&&(K=!0,v=!1,y(N,a.onCleanup),t.unbind("."+r+" ."+M),s.fadeTo(200,0),n.stop().fadeTo(300,0,function(){n.add(s).css({opacity:1,cursor:"auto"}).hide();y(O);q.remove();setTimeout(function(){K=!1;y(da,a.onClosed)},1)}))};d.element=function(){return b(l)};d.settings=fa;b(d.init)})(jQuery,document,this);